String getDockerImageName() {
    return "registry.cn-chengdu.aliyuncs.com/wedoqms/qms_server:latest"
}

task buildDockerImage(type: Exec, group: 'build') {
    commandLine = ['docker', 'build', '-t', getDockerImageName(), project.projectDir.path]
}

task pushDockerImage(type: Exec, group: 'build') {
    dependsOn(buildDockerImage)
    commandLine = ['docker', 'push', getDockerImageName()]
}

task push(group: "build") {
    dependsOn(pushDockerImage)
}
